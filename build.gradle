plugins {
    id 'com.android.application' version '8.11.0' apply false
    id 'com.google.gms.google-services' version '4.4.3' apply false
    id 'com.google.firebase.crashlytics' version '3.0.4' apply false
    id 'org.jetbrains.kotlin.android' version '2.2.0' apply false
}

static String detectNdkVersion() {

    def version = "21.4.7075529"

    def androidHome = System.getenv("ANDROID_HOME")

    if (androidHome == null) return version
    if (new File(androidHome, "ndk/$version").isDirectory()) return version

    def versionFile = new File(androidHome, "ndk-bundle/source.properties")

    if (!versionFile.isFile()) return version

    def versionProperties = new Properties()

    versionProperties.load(versionFile.newDataInputStream())

    return versionProperties.getProperty("Pkg.Revision", version)

}

ext {

    ndkVersion = detectNdkVersion()

}